# Dragon Quest III - Professional Build System
# Generated by Advanced Source Reconstruction Engine

# Tools
AS = wla-65816
LINK = wlalink
PYTHON = python

# Directories
SRC_DIR = .
BUILD_DIR = build
TOOLS_DIR = ../../tools

# Target ROM
TARGET = dq3_reconstructed.smc
LINKFILE = $(BUILD_DIR)/linkfile

# Source files
SOURCES = bank_00.s bank_01.s bank_02.s bank_03.s bank_04.s bank_05.s bank_06.s bank_07.s bank_08.s bank_09.s bank_0a.s bank_0b.s bank_0c.s bank_0d.s bank_0e.s bank_0f.s bank_10.s bank_11.s bank_12.s bank_13.s bank_14.s bank_15.s bank_16.s bank_17.s bank_18.s bank_19.s bank_1a.s bank_1b.s bank_1c.s bank_1d.s bank_1e.s bank_1f.s bank_20.s bank_21.s bank_22.s bank_23.s bank_24.s bank_25.s bank_26.s bank_27.s bank_28.s bank_29.s bank_2a.s bank_2b.s bank_2c.s bank_2d.s bank_2e.s bank_2f.s bank_30.s bank_31.s bank_32.s bank_33.s bank_34.s bank_35.s bank_36.s bank_37.s bank_38.s bank_39.s bank_3a.s bank_3b.s bank_3c.s bank_3d.s bank_3e.s bank_3f.s bank_40.s bank_41.s bank_42.s bank_43.s bank_44.s bank_45.s bank_46.s bank_47.s bank_48.s bank_49.s bank_4a.s bank_4b.s bank_4c.s bank_4d.s bank_4e.s bank_4f.s bank_50.s bank_51.s bank_52.s bank_53.s bank_54.s bank_55.s bank_56.s bank_57.s bank_58.s bank_59.s bank_5a.s bank_5b.s bank_5c.s bank_5d.s bank_5e.s bank_5f.s bank_60.s bank_61.s bank_62.s bank_63.s bank_64.s bank_65.s bank_66.s bank_67.s bank_68.s bank_69.s bank_6a.s bank_6b.s bank_6c.s bank_6d.s bank_6e.s bank_6f.s bank_70.s bank_71.s bank_72.s bank_73.s bank_74.s bank_75.s bank_76.s bank_77.s bank_78.s bank_79.s bank_7a.s bank_7b.s bank_7c.s bank_7d.s bank_7e.s bank_7f.s bank_80.s bank_81.s bank_82.s bank_83.s bank_84.s bank_85.s bank_86.s bank_87.s bank_88.s bank_89.s bank_8a.s bank_8b.s bank_8c.s bank_8d.s bank_8e.s bank_8f.s bank_90.s bank_91.s bank_92.s bank_93.s bank_94.s bank_95.s bank_96.s bank_97.s bank_98.s bank_99.s bank_9a.s bank_9b.s bank_9c.s bank_9d.s bank_9e.s bank_9f.s bank_a0.s bank_a1.s bank_a2.s bank_a3.s bank_a4.s bank_a5.s bank_a6.s bank_a7.s bank_a8.s bank_a9.s bank_aa.s bank_ab.s bank_ac.s bank_ad.s bank_ae.s bank_af.s bank_b0.s bank_b1.s bank_b2.s bank_b3.s bank_b4.s bank_b5.s bank_b6.s bank_b7.s bank_b8.s bank_b9.s bank_ba.s bank_bb.s bank_bc.s bank_bd.s bank_be.s bank_bf.s
OBJECTS = $(SOURCES:.s=.o)

# Build rules
all: $(TARGET)

$(TARGET): $(OBJECTS) $(LINKFILE)
	$(LINK) $(LINKFILE) $(TARGET)

%.o: %.s
	$(AS) -o $@ $<

$(LINKFILE): $(OBJECTS)
	echo '[objects]' > $(LINKFILE)
	for obj in $(OBJECTS); do echo $$obj >> $(LINKFILE); done

clean:
	rm -f *.o $(TARGET) $(LINKFILE)

verify:
	$(PYTHON) $(TOOLS_DIR)/verification/rom_compare.py $(TARGET) ../../static/Dragon\ Quest\ III\ -\ english\ \(patched\).smc

.PHONY: all clean verify